{"version":3,"sources":["../../src/pages/bullet/bullet.module.ts","../../src/pages/bullet/bullet.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { BulletPage } from './bullet';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    BulletPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(BulletPage),\r\n  ],\r\n  exports: [\r\n    BulletPage\r\n  ]\r\n})\r\nexport class BulletPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bullet/bullet.module.ts","import { Component, Input, ElementRef, ViewChild, AfterViewInit, OnChanges, SimpleChanges} from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\n// import * as d3 from 'd3';  \r\n// import * as nv from 'nv';  \r\n// declare var d3: any;\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'bullet-chart',\r\n  templateUrl: 'bullet.html',\r\n})\r\nexport class BulletPage implements OnChanges, AfterViewInit{\r\n  @Input() bullet: string;\r\n  @Input('index') card_index:string;\r\n  @ViewChild (\"bulletChart\")bulletCharts: ElementRef;\r\n\r\n    //css bullet code\r\n    @ViewChild('bulletwrapper') container: any;\r\n    @Input('colors') colors: any[];\r\n    @Input('height') height: number; //pixels\r\n    @Input('actual') actual: number[];\r\n    @Input('target') target: number[];\r\n    @Input('ranges') ranges: number[];\r\n\r\n    calc_height: number = 0;\r\n    actual_height: number = 0;\r\n    actual_top: number = 0;\r\n\r\n    calc_ranges: number[] = [];\r\n    calc_actual: number[] = [];\r\n    calc_target: number = 0;\r\n\r\n    showTarget: boolean = false;\r\n    showRange: boolean = false;\r\n\r\n    color_array: any[] = ['lightgrey', 'slateblue', 'blueviolet'];\r\n\r\n    range_opacity: any[] = [];\r\n    actual_opacity: any[] = [];\r\n    viewInit: boolean = false;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams) {  }\r\n\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        //Called before any other lifecycle hook. Use it to inject dependencies, but avoid any serious work here.\r\n        //Add 'implements OnChanges' to the class.\r\n        if (this.viewInit) {\r\n            this.processData();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        //Called after ngAfterContentInit when the component's view has been initialized. Applies to components only.\r\n        //Add 'implements AfterViewInit' to the class.\r\n        this.viewInit = true;\r\n        this.processData();\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        //Called once, before the instance is destroyed.\r\n        //Add 'implements OnDestroy' to the class.\r\n\r\n    }\r\n\r\n    processData() {\r\n        this.setColors();\r\n        this.calculateHeights();\r\n        let act_max: number = Number.MIN_VALUE;\r\n        let range_max: number = Number.MIN_VALUE;\r\n        let target_max: number = Number.MIN_VALUE;\r\n        let max: number = Number.MIN_VALUE;\r\n        // let self = this;\r\n\r\n        if (this.actual) {\r\n            act_max = Math.max(...this.actual);\r\n        }\r\n        if (this.ranges) {\r\n            range_max = Math.max(...this.ranges);\r\n        }\r\n        if (this.target) {\r\n            target_max = Math.max(...this.target);\r\n        }\r\n        max = Math.max(act_max, range_max, target_max);\r\n\r\n        if (this.target && this.target.length > 0) {\r\n            this.calc_target = target_max / max * 100;\r\n            this.showTarget = true;\r\n        }\r\n\r\n        if (this.actual && this.actual.length > 0) {\r\n            this.actual.forEach((item) => {\r\n                this.calc_actual.push((item / max) * 100)\r\n            });\r\n            this.calc_actual.sort((a, b) => { return a - b });\r\n            this.addActualOpacity();\r\n        }\r\n\r\n        if (this.ranges && this.ranges.length > 0) {\r\n            this.ranges.forEach((item) => {\r\n                this.calc_ranges.push((item / max) * 100)\r\n            });\r\n            this.calc_ranges.sort((a, b) => { return a - b });\r\n            this.addRangeOpacity();\r\n            this.showRange = true;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    addRangeOpacity() {\r\n        let num = this.calc_ranges.length;\r\n        while (num > 0) {\r\n            this.range_opacity.push(1 / num);\r\n            num--;\r\n        }\r\n        this.range_opacity.reverse();\r\n\r\n    }\r\n    addActualOpacity() {\r\n        let num = this.calc_actual.length;\r\n        while (num > 0) {\r\n            this.actual_opacity.push(1 / num);\r\n            num--;\r\n        }\r\n        this.actual_opacity.reverse();\r\n    }\r\n    calculateHeights() {\r\n        if (this.height) {\r\n            this.calc_height = Math.round(this.height);\r\n        }\r\n        this.actual_height = this.calc_height / 2;\r\n        this.actual_top = this.actual_height / 2;\r\n    }\r\n\r\n    setColors() {\r\n        if (this.colors && this.colors.length === 3) {\r\n            this.color_array = this.colors;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  // ngAfterViewInit() {\r\n  //   this.bulletChart();\r\n  // }// fun ngafterViewInit ends here\r\n  // Variables required for bullet chart are listed here\r\n//   bulletParentWidth;\r\n//   chart;\r\n//   margin;\r\n//   width;\r\n//   height;\r\n//   something;\r\n//   bulletChart() {\r\n//     this.bulletParentWidth = this.bulletCharts.nativeElement.offsetWidth;\r\n//     this.margin = {top: 0, right: 3, bottom: 0, left: 0};\r\n//     this.width = this.bulletParentWidth - this.margin.left - this.margin.right;    \r\n//     this.height = 30 - this.margin.top - this.margin.bottom;\r\n//     console.log(\"width\", this.bulletParentWidth);\r\n//     this.chart = d3.bullet()\r\n//     .width(this.width)\r\n//     .height(this.height)\r\n//     // .actualColor(\"#ff0000\")\r\n//     // .targetColor(\"#00FF00\")\r\n//     // .projectedColor(\"#0000FF\")\r\n\r\n//   this.something = d3.json(\"https://api.myjson.com/bins/1ciwp3\", (error, data) => {\r\n//   if (error) throw error;\r\n\r\n//     var svg = d3.select(\"#bulletChart\"+this.card_index).selectAll(\"svg\")\r\n//       .data(data)\r\n//       .enter().append(\"svg\")\r\n//       .attr(\"class\", \"bullet\")\r\n//     //   .attr(\"width\", \"100%\")\r\n//     //   .attr(\"height\", \"auto\")\r\n//       .attr(\"width\", this.width + this.margin.left + this.margin.right)\r\n//       .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n//       .append(\"g\")\r\n//     //   .attr(\"transform\", \"translate(\" + this.margin.left + \",\" +this.margin.top + \")\")\r\n//       .call(this.chart);\r\n\r\n// //   var title = svg.append(\"g\")\r\n// //       .style(\"text-anchor\", \"end\")\r\n// //       .attr(\"transform\", \"translate(-6,\" + this.height / 2 + \")\");\r\n\r\n// //   title.append(\"text\")\r\n// //       .attr(\"class\", \"title\")\r\n// //       .text(function(d) { return d.title; });\r\n\r\n// //   title.append(\"text\")\r\n// //       .attr(\"class\", \"subtitle\")\r\n// //       .attr(\"dy\", \"1em\")\r\n// //       .text(function(d) { return d.subtitle; });\r\n\r\n//   d3.selectAll(\"button\").on(\"click\", function() {\r\n//     svg.datum(this.randomize).call(this.chart.duration(1000)); // TODO automatic transition\r\n//   });\r\n//   });\r\n\r\n// }// end of bullet chart fun\r\n\r\n// randomize(d) {\r\n//   if (!d.randomizer) d.randomizer = this.randomizer(d);\r\n//     d.ranges = d.ranges.map(d.randomizer);\r\n//     d.markers = d.markers.map(d.randomizer);\r\n//     d.measures = d.measures.map(d.randomizer);\r\n//     return d;\r\n//   }// fun required for bullet chart\r\n//   randomizer(d) {\r\n//     var k = d3.max(d.ranges) * .2;\r\n//     return function(d) {\r\n//       return Math.max(0, d + k * (Math.random() - .5));\r\n//     };\r\n//   }//fun  required for bullet chart\r\n\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bullet/bullet.ts"],"sourceRoot":""}